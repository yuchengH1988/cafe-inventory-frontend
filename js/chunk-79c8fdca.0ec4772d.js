(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79c8fdca"],{"0662":function(t,e,a){"use strict";a("c4b6")},1511:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-5"},[t.isLoading?a("Spinner"):[a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.updateUser.apply(null,arguments)}}},[a("div",{staticClass:"user-wrapper rounded w-50 mx-auto"},[a("div",{staticClass:"text-center"},[a("img",{staticClass:"avatar d-bloc img-thumbnail border-0",attrs:{src:t.avatar,width:"100",height:"100"}}),t.isEditing?a("input",{staticClass:"ml-3",attrs:{id:"avatar",type:"file",name:"avatar",accept:"image/*"},on:{change:t.handleFileChange}}):t._e()]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"input-group itemsSection"},[a("span",{staticClass:"input-group-text"},[t._v("NAME")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{disabled:!t.isEditing,name:"name",type:"text",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"input-group itemsSection"},[a("span",{staticClass:"input-group-text"},[t._v("Account")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{disabled:"",name:"account",type:"text",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"input-group itemsSection"},[a("span",{staticClass:"input-group-text mr-2"},[t._v("E-MAIL")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{disabled:!t.isEditing,name:"email",type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t.isEditing?a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"input-group itemsSection"},[a("span",{staticClass:"input-group-text mr-2"},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{name:"password",type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]):t._e(),t.isEditing?a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"input-group itemsSection"},[a("span",{staticClass:"input-group-text mr-2"},[t._v("Check Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"form-control",attrs:{name:"checkPassword",type:"password",required:""},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})])]):t._e(),a("div",{staticClass:"row mt-3 mr-4 justify-content-end"},[t.isEditing?t._e():a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.changeStatus}},[t._v(" Edit ")]),t.isEditing?a("button",{staticClass:"btn btn-info mr-3",attrs:{disabled:t.isProcessing,type:"submit"}},[t._v(" "+t._s(t.isProcessing?"...處理中":"Save")+" ")]):t._e(),t.isEditing?a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.changeStatus}},[t._v(" Cancel ")]):t._e()])])])]],2)},i=[],n=a("5530"),r=a("1da1"),o=(a("96cf"),a("b0c0"),a("498a"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("2375")),c=a("4cce"),u=a("2fa3"),d=a("2f62"),m={name:"User",components:{Spinner:o["a"]},data:function(){return{name:"",email:"",avatar:"",temp_name:"",temp_avatar:"",temp_email:"",account:"",password:"",checkPassword:"",isEditing:!1,isProcessing:!1,isLoading:!0}},created:function(){this.fetchUser()},methods:{fetchUser:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getCurrentUser();case 3:a=e.sent,s=a.data,t.name=s.name,t.avatar=s.avatar,t.account=s.account,t.email=s.email,t.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),t.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得使用者資料請稍後在試"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},changeStatus:function(){this.isEditing=!this.isEditing,!0===this.isEditing?(this.temp_name=this.name,this.temp_avatar=this.avatar,this.temp_email=this.email):(this.name=this.temp_name,this.avatar=this.temp_avatar,this.email=this.temp_email,this.password="",this.checkPassword="")},updateUser:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,i,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.isProcessing=!0,e.name.trim()&&e.email&&e.password&&e.checkPassword){a.next=5;break}return u["a"].fire({icon:"warning",title:"請填上所有欄位"}),a.abrupt("return");case 5:if(e.password===e.checkPassword){a.next=8;break}return u["a"].fire({icon:"warning",title:"確認密碼不正確"}),a.abrupt("return");case 8:return s=t.target,i=new FormData(s),a.next=12,c["a"].updateUser({formData:i});case 12:if(n=a.sent,r=n.data,"success"===r.status){a.next=16;break}throw new Error(r.message);case 16:e.password="",e.checkPassword="",e.isEditing=!1,e.isProcessing=!1,a.next=28;break;case 22:a.prev=22,a.t0=a["catch"](0),e.fetchUser(),e.isEditing=!1,e.isProcessing=!1,u["a"].fire({icon:"error",title:"無法更新使用者資料，請稍後再試"});case 28:case"end":return a.stop()}}),a,null,[[0,22]])})))()},handleFileChange:function(t){var e=t.target.files;if(e.length){var a=window.URL.createObjectURL(e[0]);this.avatar=a}}},computed:Object(n["a"])({},Object(d["b"])(["currentUser"]))},p=m,l=(a("0662"),a("2877")),v=Object(l["a"])(p,s,i,!1,null,"ea5f9108",null);e["default"]=v.exports},"498a":function(t,e,a){"use strict";var s=a("23e7"),i=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),i=a("5899"),n="["+i+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},c4b6:function(t,e,a){},c8d2:function(t,e,a){var s=a("d039"),i=a("5899"),n="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-79c8fdca.0ec4772d.js.map